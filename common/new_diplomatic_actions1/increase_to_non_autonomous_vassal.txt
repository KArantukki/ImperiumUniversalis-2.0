
increase_non_autonomous_vassal = {
	category = influence
	alert_index = 4
	alert_tooltip = increase_half_autonomous_vassal_tt
	require_acceptance = yes # Whether the recipient gets an option to decline
	is_visible = {
		is_subject = no
		FROM = {
			is_subject_of_type = half_autonomous_vassal
			is_subject_of = ROOT
		}
	}
	is_allowed = {
			dip_power = 100
			reverse_has_opinion = {
				who = FROM
				value = 100
			}
			FROM = { is_at_war = no }
	}
	on_accept = {
		add_dip_power = -100
		hidden_effect = {	# Just to be sure that flags are removed, before event triggers
			ROOT = {
				create_subject = {
					who = FROM
					subject_type = non_autonomous_vassal
				}
			}
			FROM = {
					add_opinion = { who = ROOT modifier = decreased_autonomy_opinion }
			}
		}
	}
	on_decline =
	{
			FROM = {
					add_opinion = { who = ROOT modifier = opinion_declined_autonomy_level }
			}
					add_opinion = { who = FROM modifier = opinion_declined_autonomy_level }
	}
	ai_acceptance = { 
		####################
		# NEGATIVE
		####################
		# Base Value
		add_entry = {
			name = BASE_REJECTION
			export_to_variable = {
				which = ai_value
				value = 40
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		add_entry = {
			name = BORDER_DISTANCE
			limit = {
				NOT = { is_neighbor_of = FROM }
			}
			export_to_variable = {
				variable_name = ai_value
				value = border_distance
				who = FROM
				with = THIS
			}
			multiply_variable = { which = ai_value value = -0.3 }
		}
		add_entry = {
			name = MILITARY_STRENGHT_SUBJECT
			export_to_variable = {
				variable_name = ai_value
				value = army_size 
				who = FROM
			}
			multiply_variable = { which = ai_value value = -0.75 }
		}
		
		add_entry = {
			name = DIFFERENT_CULTURE_GROUP
			limit = {
				FROM = {
					NOT = { culture_group = ROOT }
				}
			}
			export_to_variable = {
				which = ai_value
				value = 20
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		
		add_entry = {
			name = NOT_SAME_CULTURE
			limit = {
				FROM = {
					NOT = { primary_culture = ROOT }
					culture_group = ROOT
				}
			}
			export_to_variable = {
				which = ai_value
				value = 10
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		
		add_entry = {
			name = IS_GREEK_POLIS
			limit = {
				FROM = {
					has_government_reform = greek_polis_reform
				}
			}
			export_to_variable = {
				which = ai_value
				value = 10
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		
		add_entry = {
			name = IS_TRIBAL
			limit = {
				FROM = {
					OR = {
						government = native	
						government = tribal
					}
				}
			}
			export_to_variable = {
				which = ai_value
				value = 15
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		
		add_entry = {
			name = HAS_DISLOYAL_ATTITUDE
			limit = {
				FROM = {
					ai_attitude = { who = ROOT attitude = attitude_disloyal }
				}
			}
			export_to_variable = {
				which = ai_value
				value = 25
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		
		add_entry = {
			name = DEVELOPMENT_OF_FROM
			export_to_variable = {
				which = ai_value
				value = states_development
				who = FROM
			}
			multiply_variable = { which = ai_value value = -0.5 }
		}
		
		add_entry = {
			name = LIBERTY_DESIRE_OPT
			limit = {
				FROM = {
					liberty_desire = 10
					NOT = { liberty_desire = 20 }
				}
			}
			export_to_variable = {
				variable_name = ai_value
				value = 5
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		add_entry = {
			name = LIBERTY_DESIRE_OPT
			limit = {
				FROM = {
					liberty_desire = 20
					NOT = { liberty_desire = 30 }
				}
			}
			export_to_variable = {
				variable_name = ai_value
				value = 10
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		add_entry = {
			name = LIBERTY_DESIRE_OPT
			limit = {
				FROM = {
					liberty_desire = 30
					NOT = { liberty_desire = 40 }
				}
			}
			export_to_variable = {
				variable_name = ai_value
				value = 15
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		add_entry = {
			name = LIBERTY_DESIRE_OPT
			limit = {
				FROM = {
					liberty_desire = 40
					NOT = { liberty_desire = 50 }
				}
			}
			export_to_variable = {
				variable_name = ai_value
				value = 20
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		add_entry = {
			name = LIBERTY_DESIRE_OPT
			limit = {
				FROM = {
					liberty_desire = 50
					NOT = { liberty_desire = 60 }
				}
			}
			export_to_variable = {
				variable_name = ai_value
				value = 25
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		add_entry = {
			name = LIBERTY_DESIRE_OPT
			limit = {
				FROM = {
					liberty_desire = 60
					NOT = { liberty_desire = 70 }
				}
			}
			export_to_variable = {
				variable_name = ai_value
				value = 30
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		add_entry = {
			name = LIBERTY_DESIRE_OPT
			limit = {
				FROM = {
					liberty_desire = 70
					NOT = { liberty_desire = 80 }
				}
			}
			export_to_variable = {
				variable_name = ai_value
				value = 35
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		add_entry = {
			name = LIBERTY_DESIRE_OPT
			limit = {
				FROM = {
					liberty_desire = 80
					NOT = { liberty_desire = 90 }
				}
			}
			export_to_variable = {
				variable_name = ai_value
				value = 40
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		add_entry = {
			name = LIBERTY_DESIRE_OPT
			limit = {
				FROM = {
					liberty_desire = 90
				}
			}
			export_to_variable = {
				variable_name = ai_value
				value = 45
			}
			multiply_variable = { which = ai_value value = -1 }
		}
		####################
		# Positive
		###################
		add_entry = {
			name = OPINION
			export_to_variable = {
				which = ai_value
				value = opinion
				who = FROM
			}
			multiply_variable = { which = ai_value value = 0.25 }
		}
		
		add_entry = {
			name = HAS_LOYAL_ATTITUDE
			limit = {
				FROM = {
					ai_attitude = { who = ROOT attitude = attitude_loyal }
				}
			}
			export_to_variable = {
				which = ai_value
				value = 10
			}
		}
		
		add_entry = {
			name = DEVELOPMENT_OF_ROOT
			export_to_variable = {
				which = ai_value
				value = states_development
			}
			multiply_variable = { which = ai_value value = 0.25 }
		}
		
		add_entry = {
			name = MILITARY_STRENGHT_OVERLORD
			export_to_variable = {
				which = ai_value
				value = army_size 
				who = ROOT
			}
			multiply_variable = { which = ai_value value = 0.5 }
		}
		
		add_entry = {
			name = DIP_REPUTATION
			export_to_variable = {
					= ai_value
				value = diplomatic_reputation 
				who = ROOT
			}
			multiply_variable = { which = ai_value value = 2.5 }
		}
	}
	ai_will_do = {
				FROM = { NOT = { liberty_desire = 25 } }
				stability = 1
				has_any_disaster = no
				
		}
}
